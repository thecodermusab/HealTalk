---
phase: 06-video-consultations
plan: 02
type: execute
depends_on:
  - phase: 06-video-consultations
    plan: 01
files_modified: []
---

<objective>
Build the core video call UI with Agora client integration.

Purpose: Provide a functional 1:1 video session view with basic controls.

Output: Video call page with join/leave, mute/unmute, and camera toggle.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Requirements:**
- Join call by appointment/channel
- Local + remote video tracks
- Controls for mic/camera/leave
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create video call client component</name>
  <files>src/components/video/VideoCall.tsx (new)</files>
  <action>
Implement a client component that:
- Fetches Agora token from API
- Initializes Agora client
- Publishes local audio/video
- Renders remote user streams
- Provides mute/camera/leave controls
  </action>
  <verify>
Local and remote video render in dev environment.
  </verify>
  <done>
- Core video call component complete
  </done>
</task>

<task type="auto">
  <name>Task 2: Add call page route</name>
  <files>src/app/(dashboard)/shared/call/[appointmentId]/page.tsx (new)</files>
  <action>
Create a shared call page that loads appointment info, resolves channel name, and renders VideoCall.
  </action>
  <verify>
Call route renders VideoCall for valid appointments.
  </verify>
  <done>
- Call page wired to component
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Video call component works
- [ ] Call route wired to appointments
</verification>

<success_criteria>
- Users can join a 1:1 video session
</success_criteria>

<output>
After completion, create `.planning/phases/06-video-consultations/06-02-SUMMARY.md`
</output>
