---
phase: 01-foundation-environment
plan: 02
type: execute
depends_on: []
files_modified: []
---

<objective>
Create accounts and obtain API keys for all third-party services needed for HealTalk: Agora.io (video), Resend (email), Uploadthing (files), Stripe (payments), Sentry (errors), and Google OAuth (authentication).

Purpose: Establish all external service integrations with free tier accounts, obtaining API keys and credentials needed for environment configuration. All services selected have generous free tiers supporting MVP launch.

Output: API keys and credentials for 6 services, ready for .env configuration.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Tech decisions:**
- DEC-001: Use Agora.io for video calls (free tier 10k min/month)
- DEC-002: Use Resend for email (free tier 3k emails/month)
- DEC-003: Use Uploadthing for file uploads (free tier 2GB)
- DEC-008: Use Sentry for error logging (free tier 5k events/month)
- DEC-005: Google OAuth for authentication

**Services needed:**
1. **Agora.io** - Video consultations (10,000 minutes/month free)
2. **Resend** - Transactional emails (3,000 emails/month free)
3. **Uploadthing** - File uploads (2GB storage free)
4. **Stripe** - Payment processing (free, pay per transaction)
5. **Sentry** - Error tracking (5,000 errors/month free)
6. **Google Cloud Console** - OAuth credentials (free)

**Budget:** $0/month (all free tiers)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Agora.io account and get App ID + Certificate</name>
  <files>None (external service)</files>
  <action>
1. Visit agora.io and click "Sign Up" (or "Start Building")
2. Sign up with email (or GitHub for faster signup)
3. After email verification, log into Agora Console
4. Click "Create Project" or "New Project"
   - Project name: "HealTalk Video Consultations"
   - Use case: Select "Social" or "Education" (closest to mental health consultations)
   - Authentication: Enable "Secured mode" (uses App Certificate for token generation)
5. Once created, you'll see:
   - **App ID**: A 32-character hex string (e.g., "a1b2c3d4...")
   - **App Certificate**: Click "Generate" to create certificate (also 32 chars)
6. Copy both values - format:
   ```
   AGORA_APP_ID="your-32-char-app-id"
   AGORA_APP_CERTIFICATE="your-32-char-certificate"
   ```
7. Verify free tier shows 10,000 minutes/month

**Why secured mode:** Prevents unauthorized users from joining video calls. App Certificate is used server-side to generate tokens.

**IMPORTANT:** Store these securely - App Certificate should never be exposed to client-side code.
  </action>
  <verify>
- Agora Console shows project "HealTalk Video Consultations" as Active
- App ID is 32-character hex string
- App Certificate is generated and copied
- Authentication mode is "Secured" (not "Testing")
  </verify>
  <done>
- Agora account created and verified
- Project created with secured authentication
- App ID and Certificate obtained
- Free tier confirmed (10k minutes/month)
  </done>
</task>

<task type="auto">
  <name>Task 2: Create accounts for Resend, Uploadthing, Stripe, and Sentry</name>
  <files>None (external services)</files>
  <action>
Create accounts and obtain API keys for remaining services:

**Resend (Email):**
1. Visit resend.com and click "Start Building"
2. Sign up with email or GitHub
3. After verification, go to "API Keys" in dashboard
4. Click "Create API Key"
   - Name: "HealTalk Production"
   - Permission: "Sending access" (default)
5. Copy the API key (starts with `re_` - only shown once!)
   ```
   RESEND_API_KEY="re_..."
   ```
6. Note: Free tier = 3,000 emails/month, 100 emails/day

**Uploadthing (File Uploads):**
1. Visit uploadthing.com and click "Get Started"
2. Sign in with GitHub (fastest)
3. Create new app: "HealTalk"
4. Go to "API Keys" tab
5. Copy both keys:
   ```
   UPLOADTHING_SECRET="sk_live_..."
   UPLOADTHING_APP_ID="your-app-id"
   ```
6. Free tier: 2GB storage, 100MB max file size

**Stripe (Payments):**
1. Visit stripe.com and click "Sign in" → "Create account"
2. Fill in business details (can use personal email for testing)
3. Activate account (may require email verification)
4. Go to Developers > API Keys
5. Toggle "View test data" (top right) to get test keys first:
   ```
   STRIPE_PUBLIC_KEY="pk_test_..."
   STRIPE_SECRET_KEY="sk_test_..."
   ```
6. Note: Production keys require business verification (can do later)
7. Free tier: Pay only transaction fees (2.9% + 30¢ per charge)

**Sentry (Error Tracking):**
1. Visit sentry.io and click "Get Started"
2. Sign up with email or GitHub
3. Create new project:
   - Platform: "Next.js"
   - Project name: "healtalk-production"
4. After setup wizard, go to Settings > Projects > healtalk-production
5. Copy DSN (Data Source Name):
   ```
   SENTRY_DSN="https://...@sentry.io/..."
   ```
6. Free tier: 5,000 errors/month

**Important:** Save all keys immediately - some are only shown once (especially Resend and Uploadthing).
  </action>
  <verify>
For each service, verify:
- **Resend:** Dashboard shows 0/3000 emails used, API key starts with `re_`
- **Uploadthing:** Dashboard shows "HealTalk" app, 0/2GB storage used
- **Stripe:** Test mode active, keys start with `pk_test_` and `sk_test_`
- **Sentry:** Project "healtalk-production" visible, DSN copied

All API keys stored securely (not in git).
  </verify>
  <done>
- All 4 service accounts created
- API keys obtained for each service
- Free tier limits confirmed
- All keys stored securely
  </done>
</task>

<task type="auto">
  <name>Task 3: Set up Google OAuth credentials for authentication</name>
  <files>None (external service)</files>
  <action>
Set up Google OAuth for social login:

1. Visit console.cloud.google.com
2. Sign in with Google account
3. Create new project (top bar):
   - Project name: "HealTalk Authentication"
   - Organization: None (or your personal org)
   - Click "Create"
4. Enable Google+ API (required for OAuth):
   - Go to "APIs & Services" > "Library"
   - Search for "Google+ API"
   - Click "Enable"
5. Create OAuth consent screen:
   - Go to "APIs & Services" > "OAuth consent screen"
   - User Type: "External" (unless you have Google Workspace)
   - App name: "HealTalk"
   - User support email: [your email]
   - Developer contact: [your email]
   - Scopes: Leave default (email, profile, openid)
   - Test users: Add your own email for testing
   - Click "Save and Continue"
6. Create OAuth credentials:
   - Go to "APIs & Services" > "Credentials"
   - Click "Create Credentials" > "OAuth client ID"
   - Application type: "Web application"
   - Name: "HealTalk NextAuth"
   - Authorized JavaScript origins:
     - http://localhost:3000
     - (will add production URL later)
   - Authorized redirect URIs:
     - http://localhost:3000/api/auth/callback/google
     - (will add production URL later)
   - Click "Create"
7. Copy credentials:
   ```
   GOOGLE_CLIENT_ID="...apps.googleusercontent.com"
   GOOGLE_CLIENT_SECRET="GOCSPX-..."
   ```

**Important:** Keep Client Secret secure - it's sensitive like a password.
  </action>
  <verify>
- Google Cloud project "HealTalk Authentication" created
- OAuth consent screen configured
- OAuth Client ID created
- Authorized redirect URI includes: http://localhost:3000/api/auth/callback/google
- Client ID ends with `.apps.googleusercontent.com`
- Client Secret starts with `GOCSPX-`
  </verify>
  <done>
- Google Cloud Console project created
- OAuth consent screen configured
- OAuth 2.0 credentials obtained
- Redirect URIs configured for local development
- Client ID and Secret stored securely
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>6 service accounts with API keys and credentials</what-built>
  <how-to-verify>
Confirm you have all credentials saved securely:

**Checklist:**
- [ ] **Agora.io:** App ID (32 chars) + App Certificate (32 chars)
- [ ] **Resend:** API key (starts with `re_`)
- [ ] **Uploadthing:** Secret (starts with `sk_live_`) + App ID
- [ ] **Stripe:** Public key (`pk_test_`) + Secret key (`sk_test_`)
- [ ] **Sentry:** DSN (https://...@sentry.io/...)
- [ ] **Google OAuth:** Client ID (ends with `.apps.googleusercontent.com`) + Client Secret (starts with `GOCSPX-`)

**Verification steps:**
1. Count: You should have 10 total values saved
2. Format: Each key/ID follows the expected format above
3. Storage: All credentials stored in password manager or secure notes (NOT in git)
4. Access: Can view all 6 service dashboards with active projects

If any service failed or keys missing, note which one needs retry.
  </how-to-verify>
  <resume-signal>Type "approved" with count (e.g., "approved - all 10 credentials obtained"), or describe missing items</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 6 service accounts created
- [ ] All API keys and credentials obtained
- [ ] Each service dashboard accessible
- [ ] Free tier limits confirmed
- [ ] No credentials committed to git
- [ ] All keys stored securely
</verification>

<success_criteria>

- Agora.io account with App ID + Certificate
- Resend account with API key
- Uploadthing account with Secret + App ID
- Stripe account with test keys
- Sentry project with DSN
- Google OAuth Client ID + Secret
- All credentials secured (not in git)
- All services showing active/free tier status
- Ready for environment configuration
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-environment/01-02-SUMMARY.md`:

# Phase 1 Plan 2: Service Account Creation Summary

**6 third-party service accounts created with 10 API keys/credentials obtained**

## Accomplishments

- Created Agora.io project for video consultations
- Set up Resend for transactional emails
- Configured Uploadthing for file uploads
- Activated Stripe account (test mode)
- Initialized Sentry project for error tracking
- Generated Google OAuth credentials

## Files Created/Modified

None (external service setup only)

## Service Summary

| Service | Purpose | Free Tier | Credentials Obtained |
|---------|---------|-----------|---------------------|
| Agora.io | Video calls | 10k min/month | App ID + Certificate |
| Resend | Email | 3k emails/month | API Key |
| Uploadthing | File uploads | 2GB storage | Secret + App ID |
| Stripe | Payments | Pay per transaction | Public Key + Secret (test) |
| Sentry | Error tracking | 5k events/month | DSN |
| Google OAuth | Social login | Free | Client ID + Secret |

**Total credentials:** 10 values stored securely

## Decisions Made

- Using test mode for Stripe initially (production keys require business verification)
- Google OAuth consent screen set to "External" (public access)
- Added test user to Google OAuth for development testing

## Issues Encountered

[Any setup issues or none]

## Next Step

Ready for 01-03-PLAN.md - Environment variable configuration
</output>
