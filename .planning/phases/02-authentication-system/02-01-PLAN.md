---
phase: 02-authentication-system
plan: 01
type: execute
depends_on:
  - phase: 01-foundation-environment
    plan: 04
files_modified: []
---

<objective>
Configure Google OAuth end-to-end (Google Console already created) and ensure the NextAuth provider + UI flows are wired for production-ready sign-in.

Purpose: Enable users to sign in with Google using NextAuth.js v4, with the correct callback URL and a clear UI entry point.

Output: Google OAuth working locally with proper redirect handling and user-facing login options.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@src/lib/auth.ts
@src/app/(auth)/login/page.tsx
@src/app/(auth)/signup/page.tsx

**Tech decisions:**
- DEC-005: Google OAuth only (initially)
- NextAuth.js v4 for auth

**Current state:**
- Google OAuth credentials set in `.env`
- NextAuth config exists but includes unused providers
- Auth UI lacks Google sign-in entry point
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update NextAuth provider configuration</name>
  <files>src/lib/auth.ts</files>
  <action>
Ensure Google provider is the only OAuth provider (remove Facebook placeholder). Keep Credentials provider intact.

Confirm `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET` are used from environment variables.
  </action>
  <verify>
- Google provider configured with env values
- No unused OAuth providers remain
  </verify>
  <done>
- NextAuth config aligned with "Google only" decision
  </done>
</task>

<task type="auto">
  <name>Task 2: Add Google sign-in UI + redirect handling</name>
  <files>
src/app/(auth)/login/page.tsx
src/app/(auth)/signup/page.tsx
src/app/(auth)/oauth-redirect/page.tsx (new)
  </files>
  <action>
Add a "Continue with Google" button to login + signup pages, using `signIn("google")`.

Create a lightweight OAuth redirect page that resolves the user session and routes them to the correct dashboard based on role.
  </action>
  <verify>
- Login + signup pages show Google button
- OAuth flow returns to `/oauth-redirect` and redirects to the correct dashboard
  </verify>
  <done>
- Users can sign in with Google from the UI
- Post-login routing works for OAuth users
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Google OAuth sign-in flow wired into NextAuth and auth UI</what-built>
  <how-to-verify>
1. Ensure Google OAuth app has callback URL:
   `http://localhost:3000/api/auth/callback/google`
2. Start the app and click "Continue with Google" on login page.
3. Confirm successful sign-in redirects to the appropriate dashboard.
  </how-to-verify>
  <resume-signal>Type "approved 02-01" when Google OAuth UI flow works end-to-end</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] Google OAuth provider configured (Google only)
- [ ] Login + signup include Google sign-in
- [ ] OAuth redirect lands in correct dashboard
</verification>

<success_criteria>
- Google OAuth enabled in NextAuth with clean provider configuration
- UI exposes Google sign-in on login/signup
- OAuth sign-in redirects users to correct dashboard
</success_criteria>

<output>
After completion, create `.planning/phases/02-authentication-system/02-01-SUMMARY.md`
</output>
